// rsvp.js https://github.com/tildeio/rsvp.js
!function(a){var b,c,d,e;!function(){var a={},f={};b=function(b,c,d){a[b]={deps:c,callback:d}},e=d=c=function(b){function n(a){if("."!==a.charAt(0))return a;for(var c=a.split("/"),d=b.split("/").slice(0,-1),e=0,f=c.length;f>e;e++){var g=c[e];if(".."===g)d.pop();else{if("."===g)continue;d.push(g)}}return d.join("/")}if(e._eak_seen=a,f[b])return f[b];if(f[b]={},!a[b])throw new Error("Could not find module "+b);for(var j,d=a[b],g=d.deps,h=d.callback,i=[],k=0,l=g.length;l>k;k++)"exports"===g[k]?i.push(j={}):i.push(c(n(g[k])));var m=h.apply(this,i);return f[b]=j||m}}(),b("rsvp/all",["./promise","exports"],function(a,b){"use strict";var c=a["default"];b["default"]=function(a,b){return c.all(a,b)}}),b("rsvp/all_settled",["./promise","./utils","exports"],function(a,b,c){"use strict";function g(a){return{state:"fulfilled",value:a}}function h(a){return{state:"rejected",reason:a}}var d=a["default"],e=b.isArray,f=b.isNonThenable;c["default"]=function(a,b){return new d(function(b){function l(a){return function(b){n(a,g(b))}}function m(a){return function(b){n(a,h(b))}}function n(a,c){k[a]=c,0===--i&&b(k)}if(!e(a))throw new TypeError("You must pass an array to allSettled.");var j,i=a.length;if(0===i)return b([]),void 0;for(var k=new Array(i),o=0;o<a.length;o++)j=a[o],f(j)?n(o,g(j)):d.cast(j).then(l(o),m(o))},b)}}),b("rsvp/asap",["exports"],function(a){"use strict";function d(){return function(){process.nextTick(h)}}function e(){var a=0,b=new c(h),d=document.createTextNode("");return b.observe(d,{characterData:!0}),function(){d.data=a=++a%2}}function f(){return function(){setTimeout(h,1)}}function h(){for(var a=0;a<g.length;a++){var b=g[a],c=b[0],d=b[1];c(d)}g=[]}a["default"]=function(a,b){var c=g.push([a,b]);1===c&&i()};var i,b="undefined"!=typeof window?window:{},c=b.MutationObserver||b.WebKitMutationObserver,g=[];i="undefined"!=typeof process&&"[object process]"==={}.toString.call(process)?d():c?e():f()}),b("rsvp/config",["./events","exports"],function(a,b){"use strict";function e(a,b){return"onerror"===a?(d.on("error",b),void 0):2!==arguments.length?d[a]:(d[a]=b,void 0)}var c=a["default"],d={instrument:!1};c.mixin(d),b.config=d,b.configure=e}),b("rsvp/defer",["./promise","exports"],function(a,b){"use strict";var c=a["default"];b["default"]=function(a){var b={};return b.promise=new c(function(a,c){b.resolve=a,b.reject=c},a),b}}),b("rsvp/events",["exports"],function(a){"use strict";var b=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},c=function(a){var b=a._promiseCallbacks;return b||(b=a._promiseCallbacks={}),b};a["default"]={mixin:function(a){return a.on=this.on,a.off=this.off,a.trigger=this.trigger,a._promiseCallbacks=void 0,a},on:function(a,d){var f,e=c(this);f=e[a],f||(f=e[a]=[]),-1===b(f,d)&&f.push(d)},off:function(a,d){var f,g,e=c(this);return d?(f=e[a],g=b(f,d),-1!==g&&f.splice(g,1),void 0):(e[a]=[],void 0)},trigger:function(a,b){var e,g,d=c(this);if(e=d[a])for(var i=0;i<e.length;i++)g=e[i],g(b)}}}),b("rsvp/filter",["./all","./map","./utils","exports"],function(a,b,c,d){"use strict";function i(a,b,c){if(!h(a))throw new TypeError("You must pass an array to filter.");if(!g(b))throw new TypeError("You must pass a function to filter's second argument.");return e(a,c).then(function(d){return f(a,b,c).then(function(a){var b,c=d.length,e=[];for(b=0;c>b;b++)a[b]&&e.push(d[b]);return e})})}var e=a["default"],f=b["default"],g=c.isFunction,h=c.isArray;d["default"]=i}),b("rsvp/hash",["./promise","./utils","exports"],function(a,b,c){"use strict";var d=a["default"],e=b.isNonThenable,f=b.keysOf;c["default"]=function(a){return new d(function(b,c){function l(a){return function(c){g[a]=c,0===--i&&b(g)}}function m(a){i=0,c(a)}var j,k,g={},h=f(a),i=h.length;if(0===i)return b(g),void 0;for(var n=0;n<h.length;n++)k=h[n],j=a[k],e(j)?(g[k]=j,0===--i&&b(g)):d.cast(j).then(l(k),m)})}}),b("rsvp/instrument",["./config","./utils","exports"],function(a,b,c){"use strict";var d=a.config,e=b.now;c["default"]=function(a,b,c){try{d.trigger(a,{guid:b._guidKey+b._id,eventName:a,detail:b._detail,childGuid:c&&b._guidKey+c._id,label:b._label,timeStamp:e(),stack:new Error(b._label).stack})}catch(f){setTimeout(function(){throw f},0)}}}),b("rsvp/map",["./promise","./all","./utils","exports"],function(a,b,c,d){"use strict";a["default"];var f=b["default"],g=c.isArray,h=c.isFunction;d["default"]=function(a,b,c){if(!g(a))throw new TypeError("You must pass an array to map.");if(!h(b))throw new TypeError("You must pass a function to map's second argument.");return f(a,c).then(function(a){var g,d=a.length,e=[];for(g=0;d>g;g++)e.push(b(a[g]));return f(e,c)})}}),b("rsvp/node",["./promise","exports"],function(a,b){"use strict";function e(a,b){return function(c,e){c?b(c):arguments.length>2?a(d.call(arguments,1)):a(e)}}var c=a["default"],d=Array.prototype.slice;b["default"]=function(a,b){return function(){var f=d.call(arguments),i=this||b;return new c(function(b,d){c.all(f).then(function(c){try{c.push(e(b,d)),a.apply(i,c)}catch(f){d(f)}})})}}}),b("rsvp/promise",["./config","./events","./instrument","./utils","./promise/cast","./promise/all","./promise/race","./promise/resolve","./promise/reject","exports"],function(a,b,c,d,e,f,g,h,i,j){"use strict";function x(){}function y(a,b){if(!o(a))throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof y))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._id=w++,this._label=b,this._subscribers=[],k.instrument&&m("created",this),x!==a&&z(a,this)}function z(a,b){function c(a){I(b,a)}function d(a){K(b,a)}try{a(c,d)}catch(e){d(e)}}function E(a,b,c,d){var e=a._subscribers,f=e.length;e[f]=b,e[f+C]=c,e[f+D]=d}function F(a,b){var c,d,e=a._subscribers,f=a._detail;k.instrument&&m(b===C?"fulfilled":"rejected",a);for(var g=0;g<e.length;g+=3)c=e[g],d=e[g+b],G(b,c,d,f);a._subscribers=null}function G(a,b,c,d){var f,g,h,i,e=o(c);if(e)try{f=c(d),h=!0}catch(j){i=!0,g=j}else f=d,h=!0;H(b,f)||(e&&h?I(b,f):i?K(b,g):a===C?I(b,f):a===D&&K(b,f))}function H(a,b){var d,c=null;try{if(a===b)throw new TypeError("A promises callback cannot return that same promise.");if(n(b)&&(c=b.then,o(c)))return c.call(b,function(c){return d?!0:(d=!0,b!==c?I(a,c):J(a,c),void 0)},function(b){return d?!0:(d=!0,K(a,b),void 0)},"derived from: "+(a._label||" unknown promise")),!0}catch(e){return d?!0:(K(a,e),!0)}return!1}function I(a,b){a===b?J(a,b):H(a,b)||J(a,b)}function J(a,b){a._state===A&&(a._state=B,a._detail=b,k.async(L,a))}function K(a,b){a._state===A&&(a._state=B,a._detail=b,k.async(M,a))}function L(a){F(a,a._state=C)}function M(a){a._onerror&&a._onerror(a._detail),F(a,a._state=D)}var k=a.config;b["default"];var m=c["default"],n=d.objectOrFunction,o=d.isFunction,p=d.now,q=e["default"],r=f["default"],s=g["default"],t=h["default"],u=i["default"],v="rsvp_"+p()+"-",w=0;j["default"]=y,y.cast=q,y.all=r,y.race=s,y.resolve=t,y.reject=u;var A=void 0,B=0,C=1,D=2;y.prototype={constructor:y,_id:void 0,_guidKey:v,_label:void 0,_state:void 0,_detail:void 0,_subscribers:void 0,_onerror:function(a){k.trigger("error",a)},then:function(a,b,c){var d=this;this._onerror=null;var e=new this.constructor(x,c);if(this._state){var f=arguments;k.async(function(){G(d._state,e,f[d._state-1],d._detail)})}else E(this,e,a,b);return k.instrument&&m("chained",d,e),e},"catch":function(a,b){return this.then(null,a,b)},"finally":function(a,b){var c=this.constructor;return this.then(function(b){return c.cast(a()).then(function(){return b})},function(b){return c.cast(a()).then(function(){throw b})},b)}}}),b("rsvp/promise/all",["../utils","exports"],function(a,b){"use strict";var c=a.isArray,d=a.isNonThenable;b["default"]=function(a,b){var e=this;return new e(function(b,f){function k(a){return function(c){h[a]=c,0===--g&&b(h)}}function l(a){g=0,f(a)}if(!c(a))throw new TypeError("You must pass an array to all.");var i,g=a.length,h=new Array(g);if(0===g)return b(h),void 0;for(var m=0;m<a.length;m++)i=a[m],d(i)?(h[m]=i,0===--g&&b(h)):e.cast(i).then(k(m),l)},b)}}),b("rsvp/promise/cast",["exports"],function(a){"use strict";a["default"]=function(a,b){var c=this;return a&&"object"==typeof a&&a.constructor===c?a:new c(function(b){b(a)},b)}}),b("rsvp/promise/race",["../utils","exports"],function(a,b){"use strict";var c=a.isArray;a.isFunction;var e=a.isNonThenable;b["default"]=function(a,b){var f,d=this;return new d(function(b,g){function i(a){h&&(h=!1,b(a))}function j(a){h&&(h=!1,g(a))}if(!c(a))throw new TypeError("You must pass an array to race.");for(var h=!0,k=0;k<a.length;k++){if(f=a[k],e(f))return h=!1,b(f),void 0;d.cast(f).then(i,j)}},b)}}),b("rsvp/promise/reject",["exports"],function(a){"use strict";a["default"]=function(a,b){var c=this;return new c(function(b,c){c(a)},b)}}),b("rsvp/promise/resolve",["exports"],function(a){"use strict";a["default"]=function(a,b){var c=this;return new c(function(b){b(a)},b)}}),b("rsvp/race",["./promise","exports"],function(a,b){"use strict";var c=a["default"];b["default"]=function(a,b){return c.race(a,b)}}),b("rsvp/reject",["./promise","exports"],function(a,b){"use strict";var c=a["default"];b["default"]=function(a,b){return c.reject(a,b)}}),b("rsvp/resolve",["./promise","exports"],function(a,b){"use strict";var c=a["default"];b["default"]=function(a,b){return c.resolve(a,b)}}),b("rsvp/rethrow",["exports"],function(a){"use strict";a["default"]=function(a){throw setTimeout(function(){throw a}),a}}),b("rsvp/utils",["exports"],function(a){"use strict";function b(a){return"function"==typeof a||"object"==typeof a&&null!==a}function c(a){return"function"==typeof a}function d(a){return!b(a)}function e(a){return"[object Array]"===Object.prototype.toString.call(a)}a.objectOrFunction=b,a.isFunction=c,a.isNonThenable=d,a.isArray=e;var f=Date.now||function(){return(new Date).getTime()};a.now=f;var g=Object.keys||function(a){var b=[];for(var c in a)b.push(c);return b};a.keysOf=g}),b("rsvp",["./rsvp/promise","./rsvp/events","./rsvp/node","./rsvp/all","./rsvp/all_settled","./rsvp/race","./rsvp/hash","./rsvp/rethrow","./rsvp/defer","./rsvp/config","./rsvp/map","./rsvp/resolve","./rsvp/reject","./rsvp/asap","./rsvp/filter","exports"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){"use strict";function G(a,b){z.async(a,b)}function H(){z.on.apply(z,arguments)}function I(){z.off.apply(z,arguments)}var q=a["default"],r=b["default"],s=c["default"],t=d["default"],u=e["default"],v=f["default"],w=g["default"],x=h["default"],y=i["default"],z=j.config,A=j.configure,B=k["default"],C=l["default"],D=m["default"],E=n["default"],F=o["default"];if(z.async=E,"undefined"!=typeof window&&"object"==typeof window.__PROMISE_INSTRUMENTATION__){var J=window.__PROMISE_INSTRUMENTATION__;A("instrument",!0);for(var K in J)J.hasOwnProperty(K)&&H(K,J[K])}p.Promise=q,p.EventTarget=r,p.all=t,p.allSettled=u,p.race=v,p.hash=w,p.rethrow=x,p.defer=y,p.denodeify=s,p.configure=A,p.on=H,p.off=I,p.resolve=C,p.reject=D,p.async=G,p.map=B,p.filter=F}),a.RSVP=c("rsvp")}(window);